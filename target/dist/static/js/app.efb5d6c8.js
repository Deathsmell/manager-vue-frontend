(function(t){function e(e){for(var n,i,r=e[0],l=e[1],c=e[2],d=0,m=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&m.push(o[i][0]),o[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(m.length)m.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,r=1;r<a.length;r++){var l=a[r];0!==o[l]&&(n=!1)}n&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},o={app:0},s=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),o=(a("d3b7"),a("bc3a")),s=a.n(o),i={},r=s.a.create(i);r.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),r.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)})),Plugin.install=function(t,e){console.log(e),t.axios=r,window.axios=r,Object.defineProperties(t.prototype,{axios:{get:function(){return r}},$axios:{get:function(){return r}}})},n["a"].use(Plugin);Plugin;var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("app-bar"),a("router-view")],1)},c=[],u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-app-bar",{attrs:{color:"deep-purple accent-4",dense:"",dark:""}},[a("v-app-bar-nav-icon",{on:{click:function(e){t.drawer=!0}}}),a("v-toolbar-title",[t._v("Manager")]),a("v-spacer"),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{icon:""}},n),[t.auth()?a("v-icon",{attrs:{color:"white"},on:{click:function(e){return t.logout()}}},[t._v("mdi-exit-to-app ")]):t._e(),t.auth()?t._e():a("v-icon",{attrs:{color:"white"},on:{click:function(e){return t.logout()}}},[t._v("mdi-login ")])],1)]}}])},[t.auth()?t._e():a("span",[t._v("Login")]),t.auth()?a("span",[t._v("Logout")]):t._e()])],1),a("v-navigation-drawer",{attrs:{absolute:"",temporary:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list-item",[a("v-list-item-avatar",[t._e(),a("v-icon",{attrs:{large:"",color:"black"}},[t._v("mdi-account-circle")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(t.getUserInfo()))])],1)],1),a("v-divider"),a("v-list",{attrs:{nav:"",dense:""}},[a("v-list-item-group",{attrs:{"active-class":"deep-purple--text text--accent-4"},model:{value:t.group,callback:function(e){t.group=e},expression:"group"}},[a("v-list-item",{attrs:{href:"/"}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-home")])],1),a("v-list-item-title",[t._v("Home")])],1),a("v-list-item",{attrs:{href:"/"}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-account")])],1),a("v-list-item-title",[t._v("Account")])],1),a("v-list-item",{on:{click:t.logout}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-exit-to-app")])],1),a("v-list-item-title",[t._v("Exit")])],1)],1)],1)],1)],1)},d=[],m={name:"AppBar",data:function(){return{group:[],drawer:!1}},created:function(){console.log(this.$store.getters.isAuthenticated),console.log(this.$store.state.token)},methods:{getUserInfo:function(){var t=this.$store.getters.getUsername;return t||"Гость"},auth:function(){var t=this.$store.getters.isAuthenticated;return null!=t&&t},home:function(){this.$router.push("/")},logout:function(){this.$store.dispatch("logout"),this.$router.push("/login")}}},v=m,p=a("2877"),f=a("6544"),h=a.n(f),g=a("40dc"),b=a("5bc1"),x=a("8336"),k=a("ce7e"),I=a("132d"),_=a("adda"),w=a("8860"),C=a("da13"),V=a("8270"),y=a("5d23"),$=a("1baa"),O=a("34c3"),P=a("f774"),j=a("2fa4"),S=a("2a7f"),T=a("3a2f"),A=Object(p["a"])(v,u,d,!1,null,"1875e463",null),M=A.exports;h()(A,{VAppBar:g["a"],VAppBarNavIcon:b["a"],VBtn:x["a"],VDivider:k["a"],VIcon:I["a"],VImg:_["a"],VList:w["a"],VListItem:C["a"],VListItemAvatar:V["a"],VListItemContent:y["a"],VListItemGroup:$["a"],VListItemIcon:O["a"],VListItemTitle:y["b"],VNavigationDrawer:P["a"],VSpacer:j["a"],VToolbarTitle:S["a"],VTooltip:T["a"]});var E={name:"App",components:{AppBar:M},data:function(){return{}}},L=E,B=a("7496"),N=Object(p["a"])(L,l,c,!1,null,null,null),q=N.exports;h()(N,{VApp:B["a"]});var F=a("f309");n["a"].use(F["a"]);var R=new F["a"]({}),U=a("8c4f"),D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{attrs:{headers:t.headers,"fixed-header":"",height:t.height,items:t.cashboxes,"item-key":"id","sort-by":"id","hide-default-footer":"",page:t.page,"items-per-page":t.itemsPerPage,loading:t.loading,search:t.search},on:{"update:page":function(e){t.page=e},"page-count":function(e){t.pageCount=e}},scopedSlots:t._u([{key:"item.skno",fn:function(e){var n=e.item;return[a("v-chip",{attrs:{color:t.getColor(n.skno),dark:""}},[t._v(t._s(n.skno))])]}},{key:"item.master",fn:function(e){var n=e.item,o=e.value;return[a("v-menu",{attrs:{top:"","close-on-content-click":t.closeOnContentClick},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-chip",t._g({attrs:{color:"primary",dark:""}},o),[t._v(" "+t._s(n.master.name)+" ")])]}}],null,!0)},[a("v-list",t._l(t.masters,(function(e,s){return a("v-list-item",{key:s,on:{click:function(a){return t.setMaster(n,e,o)}}},[a("v-list-item-title",[t._v(t._s(e.title))])],1)})),1)],1)]}},t.edit?{key:"item.actions",fn:function(e){var n=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(n)}}},[t._v(" mdi-pencil ")])]}}:null,{key:"footer",fn:function(){return[a("v-container",{staticClass:"pa-0"},[a("v-row",{staticClass:"ma-0 pa-0",attrs:{"no-gutters":"",justify:"space-around"}},[a("v-col",[a("v-btn-toggle",{staticClass:"align-content-center float-left",model:{value:t.icon,callback:function(e){t.icon=e},expression:"icon"}},[a("v-btn",{attrs:{value:"left"}},[a("span",{staticClass:"hidden-sm-and-down"},[t._v("Все")])]),a("v-btn",{attrs:{value:"center"}},[a("span",{staticClass:"hidden-sm-and-down"},[t._v("Город")])]),a("v-btn",{attrs:{value:"right"}},[a("span",{staticClass:"hidden-sm-and-down"},[t._v("Иногородние")])])],1)],1),a("v-col",[a("v-pagination",{staticClass:"text-center pt-2",attrs:{length:t.pageCount,"total-visible":"7"},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1),a("v-col",[a("v-switch",{staticClass:"float-right",attrs:{label:"Редактировать"},model:{value:t.edit,callback:function(e){t.edit=e},expression:"edit"}})],1)],1)],1)]},proxy:!0},{key:"top",fn:function(){return[a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([t.edit?{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},n),[t._v("New Item")])]}}:null],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Договор"},model:{value:t.editedItem.client.contract,callback:function(e){t.$set(t.editedItem.client,"contract",e)},expression:"editedItem.client.contract"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Дата ввода"},model:{value:t.editedItem.dateEnter,callback:function(e){t.$set(t.editedItem,"dateEnter",e)},expression:"editedItem.dateEnter"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"УНП"},model:{value:t.editedItem.client.vat,callback:function(e){t.$set(t.editedItem.client,"vat",e)},expression:"editedItem.client.vat"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Фирма"},model:{value:t.editedItem.client.name,callback:function(e){t.$set(t.editedItem.client,"name",e)},expression:"editedItem.client.name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-switch",{attrs:{label:"СКНО"},model:{value:t.editedItem.skno,callback:function(e){t.$set(t.editedItem,"skno",e)},expression:"editedItem.skno"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"КСА"},model:{value:t.editedItem.nameModel,callback:function(e){t.$set(t.editedItem,"nameModel",e)},expression:"editedItem.nameModel"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Адрес"},model:{value:t.editedItem.address,callback:function(e){t.$set(t.editedItem,"address",e)},expression:"editedItem.address   "}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Дата ввода"},model:{value:t.editedItem.dateCreate,callback:function(e){t.$set(t.editedItem,"dateCreate",e)},expression:"editedItem.dateCreate"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Мастер"},model:{value:t.editedItem.master.name,callback:function(e){t.$set(t.editedItem.master,"name",e)},expression:"editedItem.master.name"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v("Save")])],1)],1)],1)]},proxy:!0}],null,!0)})],1)},H=[],J=(a("4160"),a("c975"),a("a434"),a("b0c0"),a("159b"),[{text:"№ договора",value:"client.contract",sortable:!1,align:"center"},{text:"Дата ввода",value:"dateEnter",sortable:!1,align:"center"},{text:"УНП",value:"client.vat",sortable:!1,align:"center"},{text:"Имя фирмы",value:"client.name",sortable:!1,align:"center"},{text:"СКНО",value:"skno",sortable:!1,align:"center"},{text:"КСА",value:"nameModel",sortable:!1,align:"center"},{text:"Адрес",value:"address",sortable:!1,align:"center"},{text:"Год выпуска",value:"dateCreate",sortable:!1,align:"center"},{text:"Мастер",value:"master",sortable:!1,align:"center"},{text:"",value:"actions",sortable:!1,align:"center"}]),z={address:"",client:{contract:"",id:0,mail:"",masters:{},name:"",nonresident:!1,vat:0},dateCreate:"",dateEnter:"",id:0,master:{avatar:null,clients:Array(0),id:0,name:""},nameModel:"",serialNumber:"",skno:!1},G="http://localhost:8080",K={data:function(){return{icon:"justify",edit:!1,dialog:!1,closeOnContentClick:!0,loading:!0,page:1,pageCount:0,itemsPerPage:15,height:0,headers:J,search:"",cashboxes:[],masters:[],editedIndex:-1,editedItem:z,defaultItem:z}},created:function(){window.addEventListener("resize",this.calculateParamComponent),this.getMasters(),this.getClientFromApi(),this.calculateParamComponent()},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},watch:{dialog:function(t){t||this.close()}},methods:{editItem:function(t){this.editedIndex=this.cashboxes.indexOf(t),this.editedItem=Object.assign({},t),console.log(t),this.dialog=!0},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},save:function(){this.editedIndex>-1?Object.assign(this.desserts[this.editedIndex],this.editedItem):this.desserts.push(this.editedItem),this.close()},getMasters:function(){var t=this;this.$axios.get(G+"/masters").then((function(e){e.data.forEach((function(e){t.masters.push({id:e.id,title:e.name,avatar:null})}))}))},setMaster:function(t,e){var a=this;this.$axios.post(G+"/cashboxes/setMaster/"+t.id,e).then((function(e){var n=a.cashboxes.indexOf(t);a.cashboxes.splice(n,1,e.data)}))},getClientFromApi:function(){var t=this;this.$axios.get(G+"/cashboxes/getAll").then((function(e){t.loading=!0,e.data.forEach((function(e){null===e.master&&(e.master={name:"Выбери мастера!"}),t.cashboxes.push(e)})),t.loading=!1}))},calculateParamComponent:function(){this.height=document.documentElement.clientHeight-190,this.itemsPerPage=this.height/48-1},getColor:function(t){return t?"green":"red"}}},Q=K,W=a("a609"),X=a("b0af"),Y=a("99d9"),Z=a("cc20"),tt=a("62ad"),et=a("a523"),at=a("8fea"),nt=a("169a"),ot=a("e449"),st=a("891e"),it=a("0fd9"),rt=a("b73d"),lt=a("8654"),ct=Object(p["a"])(Q,D,H,!1,null,null,null),ut=ct.exports;h()(ct,{VBtn:x["a"],VBtnToggle:W["a"],VCard:X["a"],VCardActions:Y["a"],VCardText:Y["b"],VCardTitle:Y["c"],VChip:Z["a"],VCol:tt["a"],VContainer:et["a"],VDataTable:at["a"],VDialog:nt["a"],VIcon:I["a"],VList:w["a"],VListItem:C["a"],VListItemTitle:y["b"],VMenu:ot["a"],VPagination:st["a"],VRow:it["a"],VSpacer:j["a"],VSwitch:rt["a"],VTextField:lt["a"]});var dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"ma-auto",attrs:{loading:t.login,width:"500",elevation:"18"}},[a("v-card-title",{staticClass:"d-flex justify-center"},[a("h2",{staticClass:"mt-2"},[t._v("Вход")])]),a("v-form",{ref:"form",staticClass:" ma-5"},[a("v-text-field",{attrs:{counter:24,label:"Username",required:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),a("v-text-field",{attrs:{"append-icon":t.show1?"mdi-eye":"mdi-eye-off",rules:[t.rules.required,t.rules.min],type:t.show1?"text":"password",name:"input-10-1",label:"Normal with hint text",hint:"At least 8 characters",counter:""},on:{"click:append":function(e){t.show1=!t.show1}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("v-card-actions",[a("v-btn",{staticClass:"mr-4",attrs:{color:"success",disabled:t.login},on:{click:function(e){return t.signin(t.username,t.password)}}},[t._v(" Войти ")]),a("v-btn",{staticClass:"mr-4",attrs:{color:"lime lighten-3"},on:{click:function(e){return t.registration(t.username,t.password)}}},[t._v(" Регистрация ")])],1)],1),a("v-snackbar",{model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" "),a("v-btn",{attrs:{color:"red",text:""}},[t._v(" Close ")])],1)],1)},mt=[],vt=(a("99af"),{name:"Auth",data:function(){return{show1:!1,login:!1,password:"",username:"",text:"ERROR",snackbar:!1,rules:{required:function(t){return!!t||"Required."},min:function(t){return t.length>=8||"Min 8 characters"}}}},methods:{registration:function(t,e){var a=this;this.login=!0,this.$axios.post("http://localhost:8080/signup",{username:t,password:e}).then((function(t){a.text="".concat(t.response.status," ").concat(t.response.body),a.login=!1})).catch((function(t){setTimeout((function(){return a.login=!1}),1e3),a.text="".concat(t.response.status," ").concat(t.response.data.message),a.snackbar=!0}))},signin:function(t,e){var a=this;this.login=!0,this.$axios.post("http://localhost:8080/signin",{username:t,password:e}).then((function(t){a.$store.dispatch("login",{token:t.data.token,username:t.data.username}),a.$router.push("/")})).catch((function(t){console.log(t.response),t.response.status>=400&&(setTimeout((function(){return a.login=!1}),1e3),a.text="".concat(t.response.status," ").concat(t.response.data.message),a.snackbar=!0)}))}}}),pt=vt,ft=a("4bd4"),ht=a("2db4"),gt=Object(p["a"])(pt,dt,mt,!1,null,"67930a50",null),bt=gt.exports;h()(gt,{VBtn:x["a"],VCard:X["a"],VCardActions:Y["a"],VCardTitle:Y["c"],VForm:ft["a"],VSnackbar:ht["a"],VTextField:lt["a"]}),n["a"].use(U["a"]);var xt=[{path:"/",component:ut},{path:"/login",component:bt},{path:"*",component:bt}],kt=new U["a"]({mode:"history",routes:xt}),It=a("2f62");n["a"].use(It["a"]);var _t={token:localStorage.getItem("user-token")||"",username:localStorage.getItem("user-name")||""},wt={isAuthenticated:function(t){return null!=t.token&&""!==t.token&&void 0!==t.token},getUsername:function(t){return t.username},getToken:function(t){return t.token}},Ct={auth_login:function(t,e){localStorage.setItem("user-token",e.token),localStorage.setItem("user-name",e.username),t.token=e.token,t.username=e.username},auth_logout:function(){_t.token="",_t.username="",localStorage.removeItem("user-token"),localStorage.removeItem("user-name")}},Vt={login:function(t,e){t.commit("auth_login",e)},logout:function(t){t.commit("auth_logout")}},yt=new It["a"].Store({state:_t,getters:wt,mutations:Ct,actions:Vt});n["a"].config.productionTip=!1,new n["a"]({vuetify:R,router:kt,store:yt,render:function(t){return t(q)}}).$mount("#app")}});
//# sourceMappingURL=app.efb5d6c8.js.map